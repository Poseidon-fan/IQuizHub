import{d as z,a as n,o as m,c as L,e as t,w as a,z as G,v as o,t as _,i as C,n as J,y as O,_ as H,r as f,g as P,b as e,m as F,K as I,j as Q,F as R,E as M,p as W,f as X}from"./index-dg0POEbG.js";import{a as N,e as Z}from"./index-D4ibRccp.js";const ee={class:"table-container"},te=z({__name:"SDList",props:{tableData:Array},setup(p){const k=S=>{O.push(`/question-detail/${S}`)};return(S,x)=>{const s=n("el-table-column"),r=n("el-link"),h=n("el-tag"),q=n("el-table");return m(),L("div",ee,[t(q,{data:p.tableData,style:{width:"100%"}},{default:a(()=>[t(s,{prop:"id",label:"编号"}),t(s,{prop:"create_time",label:"创建时间"}),t(s,{label:"题目名称"},{default:a(l=>[t(r,{onClick:G(i=>k(l.row.id),["prevent"]),type:"primary",underline:""},{default:a(()=>[o(_(l.row.title),1)]),_:2},1032,["onClick"])]),_:1}),t(s,{label:"题目作者"},{default:a(l=>[t(r,{href:l.row.url,type:"info",underline:""},{default:a(()=>[o(_(l.row.author),1)]),_:2},1032,["href"])]),_:1}),t(s,{label:"题目类型"},{default:a(l=>[l.row.type=="True/False"?(m(),C(h,{key:0},{default:a(()=>[o("判断题")]),_:1})):l.row.type=="single_choice"?(m(),C(h,{key:1},{default:a(()=>[o("单选题")]),_:1})):l.row.type=="multiple_choice"?(m(),C(h,{key:2},{default:a(()=>[o("多选题")]),_:1})):l.row.type=="fill_blanks"?(m(),C(h,{key:3},{default:a(()=>[o("填空题")]),_:1})):J("",!0)]),_:1})]),_:1},8,["data"])])}}}),ae=H(te,[["__scopeId","data-v-4b1a24a9"]]),b=p=>(W("data-v-f627fbea"),p=p(),X(),p),se={class:"sheet-editor-header"},le={class:"se-header-container"},oe=b(()=>e("a",{href:"#"},"sheet-detail",-1)),ne={class:"info-container"},ie={class:"collect-button"},ce={class:"info-statistic",style:{display:"flex"}},re={class:"sheet-detail-container"},_e={class:"sheet-detail-nav"},de={class:"sheet-description"},ue={class:"description-left"},pe=b(()=>e("h2",null,"题单简介",-1)),he=["innerHTML"],ve={class:"description-right"},fe={class:"sheet-id"},me=b(()=>e("p",null,"题单编号",-1)),be={style:{"padding-right":"15px"}},ge={class:"sheet-creator"},ye=b(()=>e("p",null,"创建者",-1)),we={class:"creator_profile"},ke={class:"creator_avatar_description"},Se={class:"creator_details"},De=b(()=>e("p",{style:{"margin-bottom":"10px"}},[o(" 关注 "),e("span",null,"0"),o(" 粉丝 "),e("span",null,"32k"),o(" 排名 "),e("span",null,"19k")],-1)),Ce={class:"sheet-type"},xe=b(()=>e("p",null,"题单类型",-1)),qe={style:{"margin-bottom":"20px"}},$e={class:"sheet-list"},Me=z({__name:"SheetDetail",props:{id:{}},setup(p){const k=async()=>{const l=await N.collect({questiongroup:x.id});l?(console.log(l),r.value?M.success("取消成功"):M.success("收藏成功"),r.value=!r.value):M.error("操作失败")};function S(l){const i=new Date(l),d=i.getFullYear(),$=String(i.getMonth()+1).padStart(2,"0"),v=String(i.getDate()).padStart(2,"0"),D=String(i.getHours()).padStart(2,"0"),g=String(i.getMinutes()).padStart(2,"0");return`${d}-${$}-${v} ${D}:${g}`}const x=p,s=f(null);P(async()=>{var l;try{const i=await N.getSheetDetail(x.id);s.value=i,(l=s.value)==null||l.questions.forEach(d=>{d.create_time=S(d.create_time)}),r.value=i.is_collect}catch(i){console.error("Failed to fetch sheet detail:",i)}});const r=f(!1),h=f("first");f(100),f("洛谷");const q=f("官方题单");return(l,i)=>{var T,B,E;const d=n("el-breadcrumb-item"),$=n("el-breadcrumb"),v=n("el-button"),D=n("el-statistic"),g=n("el-card"),j=n("el-avatar"),A=n("el-popover"),K=n("el-tag"),U=n("el-progress"),V=n("el-tab-pane"),Y=n("el-tabs");return m(),L(R,null,[e("div",se,[e("div",le,[t($,{separator:"/",class:"breadcrumb"},{default:a(()=>[t(d,{to:{path:"/staging"}},{default:a(()=>[o("staging")]),_:1}),t(d,{to:{path:"/question-sheet"}},{default:a(()=>[o("question-sheet")]),_:1}),t(d,null,{default:a(()=>[oe]),_:1})]),_:1}),e("h1",null,_((T=s.value)==null?void 0:T.title),1),e("div",ne,[e("div",ie,[F(t(v,{type:"primary",onClick:k},{default:a(()=>[o("收藏题单")]),_:1},512),[[I,!r.value]]),F(t(v,{type:"danger",onClick:k},{default:a(()=>[o("取消收藏")]),_:1},512),[[I,r.value]])]),e("div",ce,[t(D,{title:"题目总数",value:(B=s.value)==null?void 0:B.questionCnt,style:{"margin-right":"20px"}},null,8,["value"]),t(D,{title:"收藏数",value:(E=s.value)==null?void 0:E.favoriteCnt},null,8,["value"])])])])]),e("div",re,[e("div",_e,[t(Y,{modelValue:h.value,"onUpdate:modelValue":i[0]||(i[0]=c=>h.value=c),class:"demo-tabs"},{default:a(()=>[t(V,{label:"题单简介",name:"first"},{default:a(()=>[e("div",de,[e("div",ue,[t(g,null,{default:a(()=>{var c;return[pe,e("div",{innerHTML:(c=s.value)==null?void 0:c.content},null,8,he)]}),_:1})]),e("div",ve,[t(g,{class:"detail-card"},{default:a(()=>{var c,y;return[e("div",fe,[me,e("p",be,_((c=s.value)==null?void 0:c.id),1)]),e("div",ge,[ye,t(A,{placement:"top-start",width:"300",title:(y=s.value)==null?void 0:y.author.username,trigger:"hover"},{reference:a(()=>[t(v,null,{default:a(()=>{var u;return[o(_((u=s.value)==null?void 0:u.author.username),1)]}),_:1})]),default:a(()=>{var u,w;return[e("div",we,[e("div",ke,[t(j,{size:"50",src:Q(Z).backEnd+((u=s.value)==null?void 0:u.author.avatar.slice(1)),style:{float:"left"}},null,8,["src"]),e("p",null,_((w=s.value)==null?void 0:w.author.introduction),1)]),e("div",Se,[De,t(v,{type:"primary",size:"small"},{default:a(()=>[o("关注")]),_:1}),t(v,{size:"small"},{default:a(()=>[o("私信")]),_:1})])])]}),_:1},8,["title"])]),e("div",Ce,[xe,t(K,{type:"info",style:{width:"60px",height:"32px"}},{default:a(()=>[o(_(q.value),1)]),_:1})])]}),_:1}),t(g,{class:"detail-progress"},{default:a(()=>{var c,y,u,w;return[e("h3",qe,"我通过的题目 "+_((c=s.value)==null?void 0:c.passedCnt)+" / "+_((y=s.value)==null?void 0:y.questionCnt),1),t(U,{percentage:((u=s.value)==null?void 0:u.passedCnt)/((w=s.value)==null?void 0:w.questionCnt)*100,"stroke-width":15,striped:"","striped-flow":""},null,8,["percentage"])]}),_:1})])])]),_:1}),t(V,{label:"题目列表",name:"second"},{default:a(()=>{var c;return[e("div",$e,[t(ae,{tableData:(c=s.value)==null?void 0:c.questions},null,8,["tableData"])])]}),_:1})]),_:1},8,["modelValue"])])])],64)}}}),Be=H(Me,[["__scopeId","data-v-f627fbea"]]);export{Be as default};
