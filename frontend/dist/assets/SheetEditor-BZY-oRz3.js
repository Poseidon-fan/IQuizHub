import{e as O,a as f}from"./index-D4ibRccp.js";import{d as U,a,o as p,c as q,e,w as t,z as P,v as i,t as B,i as g,n as G,y as R,_ as F,r as x,k as E,g as W,Y as X,L as Y,T as j,P as H,M as J,U as K,N as Z,S as ee,O as te,Q as ae,R as oe,V as le,W as ne,X as se,b as h,E as b,p as re,f as ie}from"./index-dg0POEbG.js";const ce={class:"table-container"},de=U({__name:"SEList",props:{tableData:Array},setup(c){const v=d=>{R.push(`/question-detail/${d}`)},m=d=>{};return(d,V)=>{const u=a("el-table-column"),y=a("el-link"),r=a("el-tag"),w=a("el-button"),o=a("el-table");return p(),q("div",ce,[e(o,{data:c.tableData,style:{width:"100%"}},{default:t(()=>[e(u,{prop:"id",label:"编号"}),e(u,{label:"题目名称"},{default:t(l=>[e(y,{onClick:P(k=>v(l.row.id),["prevent"]),type:"primary",underline:""},{default:t(()=>[i(B(l.row.title),1)]),_:2},1032,["onClick"])]),_:1}),e(u,{label:"题目作者"},{default:t(l=>[e(y,{href:l.row.url,type:"info",underline:""},{default:t(()=>[i(B(l.row.author),1)]),_:2},1032,["href"])]),_:1}),e(u,{label:"题目类型"},{default:t(l=>[l.row.type=="True/False"?(p(),g(r,{key:0},{default:t(()=>[i("判断题")]),_:1})):l.row.type=="single_choice"?(p(),g(r,{key:1},{default:t(()=>[i("单选题")]),_:1})):l.row.type=="multiple_choice"?(p(),g(r,{key:2},{default:t(()=>[i("多选题")]),_:1})):l.row.type=="fill_blanks"?(p(),g(r,{key:3},{default:t(()=>[i("填空题")]),_:1})):G("",!0)]),_:1}),e(u,null,{default:t(l=>[e(w,{type:"danger",onClick:k=>m(l.row.id)},{default:t(()=>[i("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])}}}),ue=F(de,[["__scopeId","data-v-2390f350"]]),L=c=>(re("data-v-02656468"),c=c(),ie(),c),_e={class:"sheet-editor-header"},pe={class:"se-header-container"},me=L(()=>h("a",{href:"#"},"question-bank",-1)),fe=L(()=>h("h1",null,"题单编辑",-1)),be={class:"content-container"},he={class:"upload",style:{display:"flex"}},ve=U({__name:"SheetEditor",props:{id:{}},setup(c){const v=x("first"),m=x([]),d=x(""),V=E(()=>O.backEnd+`api/question/questiongroup/put/${r.id}/`),u=E(()=>({Authorization:`Bearer ${localStorage.getItem("token")}`})),y=async n=>{try{const s=await f.getSheetDetail(r.id);o.avatar=s.avatar,b.success("上传成功")}catch(s){console.error("Failed to fetch sheet detail:",s)}},r=c,w=async()=>{try{await f.addQuestionToGroup(d.value,r.id);const n=await f.getSheetDetail(r.id);m.value=n.questions,b.success("上传成功")}catch{b.error("上传失败")}};W(async()=>{try{const n=await f.getSheetDetail(r.id);o.title=n.title,o.content=n.content,o.avatar=n.avatar,m.value=n.questions}catch(n){console.error("Failed to fetch sheet detail:",n)}});const o=X({title:"",content:"",avatar:""}),l=async()=>{await f.updateSheetDetail({title:o.title,content:o.content},r.id)?b({message:"更新成功",type:"success",duration:3e3}):b.error("更新失败")},k=[Y,j,H,J.configure({bubble:!0}),K.configure({bubble:!0,menubar:!1}),Z,ee,te,ae,oe,le,ne.configure({bubble:!0}),se.configure({bubble:!0})];return(n,s)=>{const D=a("el-breadcrumb-item"),N=a("el-breadcrumb"),T=a("el-avatar"),z=a("el-upload"),C=a("el-input"),S=a("el-form-item"),M=a("el-tiptap"),I=a("el-button"),A=a("el-form"),$=a("el-tab-pane"),Q=a("el-tabs");return p(),q("div",_e,[h("div",pe,[e(N,{separator:"/",class:"breadcrumb"},{default:t(()=>[e(D,{to:{path:"/staging"}},{default:t(()=>[i("staging")]),_:1}),e(D,null,{default:t(()=>[me]),_:1})]),_:1}),fe]),h("div",be,[e(z,{class:"avatar-uploader",action:V.value,"show-file-list":!1,method:"put",headers:u.value,name:"avatar","on-success":y},{default:t(()=>[e(T,{size:100,src:o.avatar,class:"sheet-avatar"},null,8,["src"])]),_:1},8,["action","headers"]),e(Q,{modelValue:v.value,"onUpdate:modelValue":s[3]||(s[3]=_=>v.value=_),class:"demo-tabs",style:{"margin-bottom":"20px",width:"100%"}},{default:t(()=>[e($,{label:"基本信息",name:"first"},{default:t(()=>[e(A,{model:o,"label-width":"auto"},{default:t(()=>[e(S,{label:"题单名",style:{"max-width":"600px"}},{default:t(()=>[e(C,{modelValue:o.title,"onUpdate:modelValue":s[0]||(s[0]=_=>o.title=_)},null,8,["modelValue"])]),_:1}),e(S,{label:"题单描述",style:{width:"1000px"}},{default:t(()=>[e(M,{content:o.content,"onUpdate:content":s[1]||(s[1]=_=>o.content=_),extensions:k},null,8,["content"])]),_:1}),e(S,null,{default:t(()=>[e(I,{type:"primary",onClick:l},{default:t(()=>[i("Submit")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e($,{label:"题目列表",name:"second",style:{width:"100%"}},{default:t(()=>[h("div",he,[e(C,{modelValue:d.value,"onUpdate:modelValue":s[2]||(s[2]=_=>d.value=_),style:{width:"200px","margin-right":"20px"},placeholder:"要添加题目id"},null,8,["modelValue"]),e(I,{type:"primary",onClick:w},{default:t(()=>[i("添加题目")]),_:1})]),e(ue,{"table-data":m.value},null,8,["table-data"])]),_:1})]),_:1},8,["modelValue"])])])}}}),we=F(ve,[["__scopeId","data-v-02656468"]]);export{we as default};
